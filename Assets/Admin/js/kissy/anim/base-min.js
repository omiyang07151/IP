/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 14 15:39
*/
KISSY.add("anim/base/queue",["dom"],function(b,m){function f(b,a,g){var a=a||h,l,f=d.data(b,c);!f&&!g&&d.data(b,c,f={});f&&(l=f[a],!l&&!g&&(l=f[a]=[]));return l}var d=m("dom"),c=b.guid("ks-queue-"+b.now()+"-"),h=b.guid("ks-queue-"+b.now()+"-"),a;return a={queueCollectionKey:c,queue:function(b,a,d){b=f(b,a);b.push(d);return b},remove:function(d,e,c){var l=f(d,e,1);l&&(c=b.indexOf(c,l),-1<c&&l.splice(c,1));l&&!l.length&&a.clearQueue(d,e);return l},clearQueues:function(b){d.removeData(b,c)},clearQueue:function(a,
e){var e=e||h,g=d.data(a,c);g&&delete g[e];b.isEmptyObject(g)&&d.removeData(a,c)},dequeue:function(b,d){var c=f(b,d,1);c&&(c.shift(),c.length||a.clearQueue(b,d));return c}}});
KISSY.add("anim/base/utils",["./queue","dom"],function(b,m){var f=m("./queue"),d=m("dom"),c=b.guid("ks-anim-unqueued-"+b.now()+"-"),h=b.guid("ks-anim-paused-"+b.now()+"-");return{saveRunningAnim:function(a){var n=a.node,e=d.data(n,c);e||d.data(n,c,e={});e[b.stamp(a)]=a},removeRunningAnim:function(a){var n=a.node,e=d.data(n,c);e&&(delete e[b.stamp(a)],b.isEmptyObject(e)&&d.removeData(n,c))},isAnimPaused:function(a){var c=d.data(a.node,h);return c?!!c[b.stamp(a)]:0},removePausedAnim:function(a){var c=
a.node,e=d.data(c,h);e&&(delete e[b.stamp(a)],b.isEmptyObject(e)&&d.removeData(c,h))},savePausedAnim:function(a){var c=a.node,e=d.data(c,h);e||d.data(c,h,e={});e[b.stamp(a)]=a},isAnimRunning:function(a){var f=d.data(a.node,c);return f?!!f[b.stamp(a)]:0},isElPaused:function(a){return(a=d.data(a,h))&&!b.isEmptyObject(a)},isElRunning:function(a){return(a=d.data(a,c))&&!b.isEmptyObject(a)},pauseOrResumeQueue:function(a,f,e){a=d.data(a,"resume"===e?h:c);a=b.merge(a);b.each(a,function(b){if(void 0===f||
b.config.queue===f)b[e]()})},stopEl:function(a,h,e,g){e&&(void 0===g?f.clearQueues(a):!1!==g&&f.clearQueue(a,g));a=d.data(a,c);a=b.merge(a);b.each(a,function(b){(void 0===g||b.config.queue===g)&&b.stop(h)})}}});
KISSY.add("anim/base/short-hand",[],function(){return{background:["backgroundColor"],border:"borderBottomWidth,borderLeftWidth,borderRightWidth,borderTopWidth,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor".split(","),borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderBottom:["borderBottomWidth","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftColor"],borderTop:["borderTopWidth","borderTopColor"],borderRight:["borderRightWidth",
"borderRightColor"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise","./base/short-hand"],function(b,m){function f(j,c,k,g,i){if(j.node)i=j;else{"string"===typeof c&&(c=b.unparam(""+c,";",":"),b.each(c,function(a,j){var d=b.trim(j);d&&(c[d]=b.trim(a));(!d||d!==j)&&delete c[j]}));if(b.isPlainObject(k))i=b.clone(k);else if(i={complete:i},k&&(i.duration=k),g)i.easing=g;i.node=j;i.to=c}i=b.merge(s,i);f.superclass.constructor.call(this);a.Defer(this);this.config=i;j=i.node;b.isPlainObject(j)||(j=d.get(i.node));
this.node=this.el=j;this._backupProps={};this._propsData={};var j={},c=i.to,h;for(h in c)j[e(h)]=c[h];i.to=j}var d=m("dom"),c=m("./base/utils"),h=m("./base/queue"),a=m("promise"),n=d.NodeType,e=b.camelCase,g=b.noop,l={toggle:1,hide:1,show:1},r=m("./base/short-hand"),s={duration:1,easing:"linear"};b.extend(f,a,{prepareFx:g,runInternal:function(){var a=this,e=a.config,k=a.node,f,i=a._backupProps,h=a._propsData,g=e.to,m=e.delay||0,p=e.duration;c.saveRunningAnim(a);b.each(g,function(a,c){b.isPlainObject(a)||
(a={value:a});h[c]=b.mix({delay:m,easing:e.easing,frame:e.frame,duration:p},a)});b.each(r,function(a,c){var j,e=h[c],f;e&&(f=e.value,j={},b.each(a,function(a){j[a]=d.css(k,a)}),d.css(k,c,f),b.each(j,function(a,c){c in h||(h[c]=b.merge(e,{value:d.css(k,c)}));d.css(k,c,a)}),delete h[c])});if(k.nodeType===n.ELEMENT_NODE){if(g.width||g.height)g=k.style,b.mix(i,{overflow:g.overflow,"overflow-x":g.overflowX,"overflow-y":g.overflowY}),g.overflow="hidden","inline"===d.css(k,"display")&&"none"===d.css(k,"float")&&
(10>b.UA.ieMode?g.zoom=1:g.display="inline-block");var q,o;o="none"===d.css(k,"display");b.each(h,function(b,c){f=b.value;if(l[f]){if("hide"===f&&o||"show"===f&&!o)return a.stop(!0),q=!1;i[c]=d.style(k,c);"toggle"===f&&(f=o?"show":"hide");"hide"===f?(b.value=0,i.display="none"):(b.value=d.css(k,c),d.css(k,c,0),d.show(k))}});if(!1===q)return}a.startTime=b.now();b.isEmptyObject(h)?(a.__totalTime=1E3*p,a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime)):(a.prepareFx(),a.doStart())},isRunning:function(){return c.isAnimRunning(this)},
isPaused:function(){return c.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=b.now()-this.startTime,this.__totalTime-=this._runTime,c.removeRunningAnim(this),c.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:g,doStart:g,resume:function(){var a=this;a.isPaused()&&(a.startTime=b.now()-a._runTime,c.removePausedAnim(a),c.saveRunningAnim(a),a.__waitTimeout?a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime):
(a.beforeResume(),a.doStart()));return a},beforeResume:g,run:function(){var a;a=this.config.queue;!1===a?this.runInternal():(a=h.queue(this.node,a,this),1===a.length&&this.runInternal());return this},stop:function(a){var e=this.node,f=this.config.queue;if(this.isResolved()||this.isRejected())return this;this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused())return!1!==f&&h.remove(e,f,this),this;this.doStop(a);c.removeRunningAnim(this);c.removePausedAnim(this);
var g=this.defer;if(a){var i,a=this.config.complete;b.isEmptyObject(i=this._backupProps)||d.css(this.node,i);a&&a.call(this);g.resolve([this])}else g.reject([this]);!1!==f&&(e=h.dequeue(e,f))&&e[0]&&e[0].runInternal();return this}});var t=f.Statics={isRunning:c.isElRunning,isPaused:c.isElPaused,stop:c.stopEl,Q:h};b.each(["pause","resume"],function(a){t[a]=function(b,d){return null===d||"string"===typeof d||!1===d?c.pauseOrResumeQueue(b,d,a):c.pauseOrResumeQueue(b,void 0,a)}});return f});
