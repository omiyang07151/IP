/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 13 17:47
*/
KISSY.add("base",["attribute"],function(e,q){function j(b,a){return function(c){return function(){a?c!==i&&c.apply(this,arguments):this.callSuper.apply(this,arguments);var d=arguments.callee.__owner__.__extensions__||[];a&&d.reverse();var f=arguments,h;if(h=d&&d.length)for(var g=0;g<h;g++){var e=d[g]&&(!b?d[g]:d[g].prototype[b]);e&&e.apply(this,f||[])}a?this.callSuper.apply(this,arguments):c!==i&&c.apply(this,arguments)}}}function o(b){var a=this.__hooks__,c=this.prototype;if(this.__extensions__.length&&
a)for(var d in a)if(!c.hasOwnProperty(d)||b.hasOwnProperty(d))b[d]=b[d]||i;return r.call(this,b)}function s(b){var a;b.target===this&&(a=this[k+b.type.slice(5).slice(0,-6)],a.call(this,b.newVal,b))}function t(b){var a=b.get("plugins"),c;e.each(a,function(b,f){"function"===typeof b&&(c=b,a[f]=new c)})}function l(b){var a,c=this.get("plugins");if(a=c.length)for(var d=0;d<a;d++)if(c[d][b])c[d][b](this)}var p=q("attribute"),m=e.ucfirst,k="_onSet",i=e.noop,n=p.extend({constructor:function(){this.callSuper.apply(this,
arguments);var b=this.get("listeners"),a;for(a in b)this.on(a,b[a]);this.initializer();t(this);l.call(this,"pluginInitializer");this.bindInternal();this.syncInternal()},initializer:i,__getHook:j,__callPluginsMethod:l,bindInternal:function(){var b=this.getAttrs(),a,c;for(a in b)if(c=k+m(a),this[c])this.on("after"+m(a)+"Change",s)},syncInternal:function(){var b=[],a;a=this.constructor;for(var c=this.getAttrs();a;)b.push(a),a=a.superclass&&a.superclass.constructor;b.reverse();for(a=0;a<b.length;a++){var d=
b[a].ATTRS||{},f;for(f in d)if(f in c){var e,g;(g=this[k+m(f)])&&0!==c[f].sync&&void 0!==(e=this.get(f))&&g.call(this,e)}}},plug:function(b){"function"===typeof b&&(b=new b);b.pluginInitializer&&b.pluginInitializer(this);this.get("plugins").push(b);return this},unplug:function(b){var a=[],c=this,d="string"===typeof b;e.each(c.get("plugins"),function(f){var e=0,g;b&&(d?(g=f.get&&f.get("pluginId")||f.pluginId,g!==b&&(a.push(f),e=1)):f!==b&&(a.push(f),e=1));e||f.pluginDestructor(c)});c.setInternal("plugins",
a);return c},getPlugin:function(b){var a=null;e.each(this.get("plugins"),function(c){if((c.get&&c.get("pluginId")||c.pluginId)===b)return a=c,!1});return a},destructor:i,destroy:function(){this.get("destroyed")||(l.call(this,"pluginDestructor"),this.destructor(),this.set("destroyed",!0),this.fire("destroy"),this.detach())}});e.mix(n,{__hooks__:{initializer:j(),destructor:j("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function a(c,d,f){e.isArray(c)||
(f=d,d=c,c=[]);d=p.extend.call(this,d,f);d.__extensions__=c;o.call(d,{});if(c.length){var h={},g={};e.each(c.concat(d),function(a){if(a){e.each(a.ATTRS,function(a,c){var d=h[c]=h[c]||{};e.mix(d,a)});var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(g[c]=a[c])}});d.ATTRS=h;g.constructor=d;e.augment(d,g)}d.extend=f&&f.extend||a;d.addMembers=o;return d}});var r=n.addMembers;return e.Base=n});
