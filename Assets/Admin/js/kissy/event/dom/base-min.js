/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 14 15:41
*/
KISSY.add("event/dom/base/utils",["dom"],function(g,b){var a=b("dom"),c="ksEventTargetId_"+g.now(),e=g.Env.host.document;return{simpleAdd:e&&e.addEventListener?function(a,e,c,b){a.addEventListener&&a.addEventListener(e,c,!!b)}:function(a,e,c){a.attachEvent&&a.attachEvent("on"+e,c)},simpleRemove:e&&e.removeEventListener?function(a,e,c,b){a.removeEventListener&&a.removeEventListener(e,c,!!b)}:function(a,e,c){a.detachEvent&&a.detachEvent("on"+e,c)},data:function(e,b){return a.data(e,c,b)},removeData:function(e){return a.removeData(e,
c)}}});KISSY.add("event/dom/base/special",[],function(){return{}});
KISSY.add("event/dom/base/observer",["event/base","./special"],function(g,b){function a(e){a.superclass.constructor.call(this,e)}var c=b("event/base"),e=b("./special");g.extend(a,c.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,c){var b,g,l=a.type,h;(h=this.originalType)?a.type=h:h=l;(b=e[h])&&b.handle?(b=b.handle(a,this,c))&&0<b.length&&(g=b[0]):g=this.simpleNotify(a,c);!1===g&&a.halt();a.type=l;return g}});return a});
KISSY.add("event/dom/base/object",["event/base"],function(g,b){function a(){return s}function c(){return r}function e(k){var t=k.type;e.superclass.constructor.call(this);this.originalEvent=k;var f=c;"defaultPrevented"in k?f=k.defaultPrevented?a:c:"getPreventDefault"in k?f=k.getPreventDefault()?a:c:"returnValue"in k&&(f=k.returnValue===r?a:c);this.isDefaultPrevented=f;var d=[],i,j=l.concat();g.each(h,function(a){t.match(a.reg)&&(j=j.concat(a.props),a.fix&&d.push(a.fix))});for(f=j.length;f;)i=j[--f],
this[i]=k[i];this.target||(this.target=k.srcElement||n);3===this.target.nodeType&&(this.target=this.target.parentNode);for(f=d.length;f;)i=d[--f],i(this,k);this.timeStamp=k.timeStamp||g.now()}var m=b("event/base"),n=g.Env.host.document,s=!0,r=!1,l="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),h=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(a,h){null==a.which&&(a.which=null!=h.charCode?h.charCode:h.keyCode);
void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,h){var f,d,i,j=h.wheelDelta,e=h.axis,b=h.wheelDeltaY,c=h.wheelDeltaX,p=h.detail;j&&(i=j/120);p&&(i=-(0===p%3?p/3:p));void 0!==e&&(e===a.HORIZONTAL_AXIS?(d=0,f=-1*i):e===a.VERTICAL_AXIS&&(f=0,d=i));void 0!==b&&(d=b/120);void 0!==c&&
(f=-1*c/120);!f&&!d&&(d=i);void 0!==f&&(a.deltaX=f);void 0!==d&&(a.deltaY=d);void 0!==i&&(a.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(a,h){var f,d,i=a.target,j=h.button;null==a.pageX&&null!=h.clientX&&(f=i.ownerDocument||n,d=f.documentElement,f=f.body,a.pageX=h.clientX+(d&&d.scrollLeft||f&&f.scrollLeft||0)-(d&&d.clientLeft||
f&&f.clientLeft||0),a.pageY=h.clientY+(d&&d.scrollTop||f&&f.scrollTop||0)-(d&&d.clientTop||f&&f.clientTop||0));!a.which&&void 0!==j&&(a.which=j&1?1:j&2?3:j&4?2:0);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===i?a.toElement:a.fromElement);return a}}];g.extend(e,m.Object,{constructor:e,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=r;e.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?
a.stopPropagation():a.cancelBubble=s;e.superclass.stopPropagation.call(this)}});return e});
KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(g,b){function a(a){g.mix(this,a);this.reset()}var c=b("event/base"),e=b("dom"),m=b("./special"),n=b("./utils"),s=b("./observer"),r=b("./object"),l=c.Utils;g.extend(a,c.Observable,{setup:function(){var a=this.type,k=m[a]||{},e=this.currentTarget,f=n.data(e).handle;(!k.setup||k.setup.call(e,a)===false)&&n.simpleAdd(e,a,f)},constructor:a,reset:function(){a.superclass.reset.call(this);this.lastCount=
this.delegateCount=0},notify:function(a){var k=a.target,b=a.type,f=this.currentTarget,d=this.observers,i=[],j,c,g=this.delegateCount||0,q,p;if(g&&k.nodeType)for(;k!==f;){if(k.disabled!==true||b!=="click"){var o={},m,l,n;q=[];for(c=0;c<g;c++){p=d[c];n=p.filter;l=n+"";m=o[l];m===void 0&&(m=o[l]=e.test(k,n));m&&q.push(p)}q.length&&i.push({currentTarget:k,currentTargetObservers:q})}k=k.parentNode||f}g<d.length&&i.push({currentTarget:f,currentTargetObservers:d.slice(g)});c=0;for(k=i.length;!a.isPropagationStopped()&&
c<k;++c){b=i[c];q=b.currentTargetObservers;b=b.currentTarget;a.currentTarget=b;for(b=0;!a.isImmediatePropagationStopped()&&b<q.length;b++){f=q[b];f=f.notify(a,this);j!==false&&f!==void 0&&(j=f)}}return j},fire:function(h,b){var h=h||{},c=""+this.type,f,d,i=m[c]||{};f=i.bubbles!==false;var j=this.currentTarget;if(!(i.fire&&i.fire.call(j,b)===false)){if(!(h instanceof r)){d=h;h=new r({currentTarget:j,type:c,target:j});g.mix(h,d)}if(!(i.preFire&&i.preFire.call(j,h,b)===false)){d=j;var u=e.getWindow(d),
v=u.document,i=[],q,p="on"+c,o=0;do{i.push(d);d=d.parentNode||d.ownerDocument||d===v&&u}while(!b&&d&&f);d=i[o];do{h.currentTarget=d;if(f=a.getDomEventObservable(d,c)){f=f.notify(h);f!==void 0&&q!==false&&(q=f)}d[p]&&d[p].call(d)===false&&h.preventDefault();d=i[++o]}while(!b&&d&&!h.isPropagationStopped());if(!b&&!h.isDefaultPrevented()){try{if(j[c]&&!g.isWindow(j)){a.triggeredEvent=c;j[c]()}}catch(l){}a.triggeredEvent=""}return q}}},on:function(a){var b=this.observers,c=m[this.type]||{},a=a instanceof
s?a:new s(a);if(this.findObserver(a)===-1){if(a.filter){b.splice(this.delegateCount,0,a);this.delegateCount++}else if(a.last){b.push(a);this.lastCount++}else b.splice(b.length-this.lastCount,0,a);c.add&&c.add.call(this.currentTarget,a)}},detach:function(a){var b,c=m[this.type]||{},f="filter"in a,d=a.filter,i=a.context,j=a.fn,e=this.currentTarget,g=this.observers,a=a.groups;if(g.length){a&&(b=l.getGroupsRe(a));var q,p,o,n,r=g.length;if(j||f||b){i=i||e;q=a=0;for(p=[];a<r;++a){o=g[a];n=o.context||e;
if(i!==n||j&&j!==o.fn||f&&(d&&d!==o.filter||!d&&!o.filter)||b&&!o.groups.match(b))p[q++]=o;else{o.filter&&this.delegateCount&&this.delegateCount--;o.last&&this.lastCount&&this.lastCount--;c.remove&&c.remove.call(e,o)}}this.observers=p}else this.reset();this.checkMemory()}},checkMemory:function(){var a=this.type,b,c,f=m[a]||{},d=this.currentTarget,i=n.data(d);if(i){b=i.observables;if(!this.hasObserver()){c=i.handle;(!f.tearDown||f.tearDown.call(d,a)===false)&&n.simpleRemove(d,a,c);delete b[a]}if(g.isEmptyObject(b)){i.handle=
null;n.removeData(d)}}}});a.triggeredEvent="";a.getDomEventObservable=function(a,b){var c=n.data(a),f;if(c)f=c.observables;return f?f[b]:null};a.getDomEventObservablesHolder=function(a,b){var c=n.data(a);!c&&b&&n.data(a,c={});return c};return a});
KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(g,b){function a(a,d){var b=r[d]||{},c;if(!a.originalType&&(c=b.typeFix)){a.originalType=d;d=c}return d}function c(f,d,b){var c,e,k,b=g.merge(b),d=a(b,d);c=l.getDomEventObservablesHolder(f,1);if(!(k=c.handle)){k=c.handle=function(a){var c=a.type,f=k.currentTarget;if(!(l.triggeredEvent===c||typeof KISSY==="undefined"))if(c=l.getDomEventObservable(f,c)){a.currentTarget=f;a=new h(a);return c.notify(a)}};
k.currentTarget=f}if(!(e=c.observables))e=c.observables={};c=e[d];if(!c){c=e[d]=new l({type:d,currentTarget:f});c.setup()}c.on(b);f=null}function e(c,b,e){var e=g.merge(e),b=a(e,b),c=l.getDomEventObservablesHolder(c),j=(c||{}).observables;if(c&&j)if(b)(b=j[b])&&b.detach(e);else for(b in j)j[b].detach(e)}var m=b("event/base"),n=b("./utils"),s=b("dom"),r=b("./special"),l=b("./observable"),h=b("./object"),k=m.Utils,t={on:function(a,b,e,j){a=s.query(a);k.batchForType(function(a,b,f,d){for(var f=k.normalizeParam(b,
f,d),e,b=f.type,d=a.length-1;d>=0;d--){e=a[d];c(e,b,f)}},1,a,b,e,j);return a},detach:function(a,b,c,j){a=s.query(a);k.batchForType(function(a,b,c,f){for(var c=k.normalizeParam(b,c,f),d,i,b=c.type,f=a.length-1;f>=0;f--){d=a[f];e(d,b,c);if(c.deep&&d.getElementsByTagName){i=d.getElementsByTagName("*");for(d=i.length-1;d>=0;d--)e(i[d],b,c)}}},1,a,b,c,j);return a},delegate:function(a,c,b,e,g){return t.on(a,c,{fn:e,context:g,filter:b})},undelegate:function(a,c,b,e,g){return t.detach(a,c,{fn:e,context:g,
filter:b})},fire:function(a,c,b,e){var g,b=b||{};b.synthetic=1;k.splitAndRun(c,function(c){var d,h,m;k.fillGroupsForEvent(c,b);c=b.type;if((h=r[c])&&h.typeFix)c=h.typeFix;a=s.query(a);for(h=a.length-1;h>=0;h--){d=a[h];m=l.getDomEventObservable(d,c);!e&&!m&&(m=new l({type:c,currentTarget:d}));if(m){d=m.fire(b,e);g!==false&&d!==void 0&&(g=d)}}});return g},fireHandler:function(a,c,b){return t.fire(a,c,b,1)},clone:function(a,b){var e;if(e=l.getDomEventObservablesHolder(a)){var h=n.data(a);h&&h===n.data(b)&&
n.removeData(b);g.each(e.observables,function(a,e){g.each(a.observers,function(a){c(b,e,a)})})}}};return t});
KISSY.add("event/dom/base/key-codes",[],function(g){var b=g.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var e=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||e>=a.F1&&e<=a.F12)return!1;switch(e){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(c){if(c>=a.ZERO&&c<=a.NINE||c>=a.NUM_ZERO&&c<=a.NUM_MULTIPLY||c>=a.A&&c<=a.Z||b.webkit&&0===c)return!0;switch(c){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(g,b){var a=b("./dom-event"),c=b("./special");return g.mix(c,{mousewheel:{typeFix:g.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(a){if(!a&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(b,c){if(!c)return a.fire(this,"focusin")},fire:function(a){if(!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&
this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(b,c){if(!c)return a.fire(this,"focusout")},fire:function(a){if(!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})});
KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(g,b){var a=b("dom"),c=b("./special");g.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(b){c[b.name]={typeFix:b.fix,handle:function(b,c,e){var g=b.currentTarget,l=b.relatedTarget;if(!l||l!==g&&!a.contains(g,l))return[c.simpleNotify(b,e)]}}})});
KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/special-events","./base/mouseenter"],function(g,b){var a=b("./base/dom-event"),c=b("./base/object"),e=b("./base/key-codes"),m=b("./base/special-events");b("./base/mouseenter");return g.merge({add:a.on,remove:a.detach,KeyCode:e,Special:m,Object:c},a)});
